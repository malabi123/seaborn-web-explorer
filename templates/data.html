{% extends "base.html" %}
{% block title %}Get Data{% endblock %}

{% block content %}
<h2 class="page-title">Get Data</h2>

<form method="get" action="/data" class="data-form">

    <fieldset class="form-group">
        <legend>Select Columns:</legend>
        <div class="checkbox-group">
            {% for item in columns %}
                <label class="checkbox-label">
                    <input type="checkbox" name="selected_columns" value="{{ item }}" 
                    {% if item in selected_columns %}checked{% endif %}>
                    {{ item }}
                </label>
            {% endfor %}
        </div>
    </fieldset>

    <div class="filter-controls-row">
        <div class="form-group flex-item">
            <label for="filtered_column">Filtered Column:</label>
            <select id="filtered_column" name="filtered_column" class="form-input">
                <option value=""></option>
                {% for item in filter_columns %}
                    <option value="{{ item }}" {% if item == filtered_column %}selected{% endif %}>
                        {{ item }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group flex-item">
            <label for="operation">Operation:</label>
            <select id="operation" name="operation" class="form-input">
                <option value=""></option>
                {% for item in operations %}
                    <option value="{{ item }}" {% if item == operation %}selected{% endif %}>
                        {{ item }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group flex-item">
            <label for="number">Number:</label>
            <input type="number" id="number" name="number" class="form-input" value="{{ number if number is not none else '' }}">
        </div>
    </div>

    <button type="submit" class="btn-submit">Submit</button>
</form>

{% if errors %}
    <div class="alert alert--error">
        <strong>Please fix the following errors:</strong>
        <ul>
            {% for err in errors %}
                <li>{{ err }}</li>
            {% endfor %}
        </ul>
    </div>
{% endif %}

<div class="table-container">
    {{ table | safe }}
</div>
{% endblock %}